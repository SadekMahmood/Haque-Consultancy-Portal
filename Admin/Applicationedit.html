<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Application | EduConnect</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Sidebar -->
    <aside class="w-full md:w-64 bg-white shadow-lg flex-shrink-0">
      <div class="p-4 border-b flex items-center justify-between md:justify-between">
        <h1 class="text-xl font-bold">EduConnect</h1>
        <button class="text-gray-500 hover:text-gray-700 md:hidden" id="sidebarToggle" aria-label="Toggle menu">
          <i class="fas fa-bars"></i>
        </button>
        <button class="hidden md:block text-gray-500 hover:text-gray-700" aria-label="New Application">
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <nav class="p-4 hidden md:block" id="sidebarNav" aria-label="Primary Navigation">
        <ul class="space-y-2">
          <li>
            <a href="index.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-th-large w-6"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="applicants.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-users w-6"></i>
              <span>Applicants</span>
            </a>
          </li>
          <li>
            <a href="agents.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-user-tie w-6"></i>
              <span>Agents</span>
            </a>
          </li>
          <li>
            <a href="universities.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-university w-6"></i>
              <span>Universities</span>
            </a>
          </li>
          <li>
            <a href="courses.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-book w-6"></i>
              <span>Courses</span>
            </a>
          </li>
          <li>
            <a href="reports.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
              <i class="fas fa-chart-bar w-6"></i>
              <span>Reports</span>
            </a>
          </li>
        </ul>
        <div class="mt-8">
          <h3 class="px-2 text-xs font-semibold text-gray-600 uppercase">Settings</h3>
          <ul class="mt-3 space-y-2">
            <li>
              <a href="profile.html" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
                <i class="fas fa-user w-6"></i>
                <span>Profile</span>
              </a>
            </li>
            <li>
              <a href="#" onclick="confirmLogout(event)" class="flex items-center p-2 text-gray-600 hover:bg-gray-100 rounded-lg sidebar-link" role="link" tabindex="0">
                <i class="fas fa-sign-out-alt w-6"></i>
                <span>Logout</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8 max-w-[1600px] mx-auto w-full">
      <!-- Breadcrumb -->
      <nav aria-label="Breadcrumb" class="flex text-sm text-gray-400 mb-6" role="navigation">
        <ol class="flex space-x-2 items-center overflow-x-auto scrollbar-hide" role="list">
          <li><a href="#" class="hover:underline text-gray-500">Dashboard</a></li>
          <li><i class="fas fa-chevron-right text-xs mx-1" aria-hidden="true"></i></li>
          <li><a href="#" class="hover:underline text-gray-500">Applicants</a></li>
          <li><i class="fas fa-chevron-right text-xs mx-1" aria-hidden="true"></i></li>
          <li class="text-gray-700 font-semibold" aria-current="page">John Michael</li>
        </ol>
      </nav>

      <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-2 gap-2">
        <h1 class="text-2xl font-bold">Edit Application</h1>
      </div>
      <div class="text-gray-500 mb-7 text-sm md:text-base">
        Edit the student application details below
      </div>
      <form class="space-y-8 max-w-4xl" id="editApplicationForm">
        <!-- Multiple University Applications Container -->
        <div class="space-y-8" id="universityApplicationsContainer">
       <!-- Single University Application Template -->
     <section class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 university-application">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-lg font-semibold">
        University &amp; Course Selection
       </h2>
       <button aria-label="Remove this university application" class="text-red-600 hover:text-red-800 text-sm font-medium remove-university-application hidden" type="button">
        <i class="fas fa-times">
        </i>
        Remove
       </button>
      </div>
      <!-- Centre Selection Section -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
       <div>
         <label class="block text-sm font-medium mb-1" for="region-0">
          Select Region<span class="text-red-600 ml-1">*</span>
         </label>
        <select class="region-select w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="region-0" name="region[]" required="">
         <option disabled="" value="">
          Choose a region
         </option>
         <option value="europe" selected>
          Europe
         </option>
         <option value="northAmerica">
          North America
         </option>
         <option value="asia">
          Asia
         </option>
         <option value="australia">
          Australia
         </option>
        </select>
       </div>
       <div>
        <label class="block text-sm font-medium mb-1">
         Source of Funding <span class="text-red-600 ml-1">*</span>
        </label>
        <div class="space-y-2">
         <label class="flex items-center">
          <input class="funding-radio text-blue-600 focus:ring-blue-500 h-4 w-4" name="funding-0" required="" type="radio" value="self" checked/>
          <span class="ml-2 text-sm">
           Self/Family Funded
          </span>
         </label>
         <label class="flex items-center">
          <input class="funding-radio text-blue-600 focus:ring-blue-500 h-4 w-4" name="funding-0" type="radio" value="sponsorship"/>
          <span class="ml-2 text-sm">
           Has Sponsorship
          </span>
         </label>
        </div>
       </div>
       <div>
         <label class="block text-sm font-medium mb-1" for="centre-0">
          Centre/University Selection<span class="text-red-600 ml-1">*</span>
         </label>
        <select class="centre-select w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="centre-0" name="centre[]" required="">
         <option disabled="" value="">
          Select centre/university
         </option>
         <option value="university1" selected>
          University of Greenwich
         </option>
         <option value="university2">
          University of London
         </option>
         <option value="university3">
          University of Lockwheel
         </option>
        </select>
       </div>
       <div>
         <label class="block text-sm font-medium mb-1" for="programType-0">
          Type of Programme<span class="text-red-600 ml-1">*</span>
         </label>
        <select class="program-type-select w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="programType-0" name="programType[]" required="">
         <option disabled="" value="">
          Select program type
         </option>
         <option value="undergraduate" selected>
          Undergraduate
         </option>
         <option value="postgraduate">
          Postgraduate
         </option>
         <option value="diploma">
          Diploma
         </option>
         <option value="Research(MRes)">
          Research (MRes)
         </option>
         <option value="Research(DBA)">
          Research (DBA)
         </option>
         <option value="Research(PhD)">
          Research (PhD)
         </option>
        </select>
       </div>
       <div>
        <label class="block text-sm font-medium mb-1" for="program-0">
         Select Program/Course<span class="text-red-600 ml-1">*</span>
        </label>
        <div class="flex items-center gap-2">
          <select class="program-select w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="program-0" name="program-single" >
            <option disabled value="">
              Choose a program
            </option>
            <option value="program1" selected>
              Bsc in Computer Science
            </option>
            <option value="program2">
              Ms in Business Administration
            </option>
            <option value="program3">
              BSC in Data Science
            </option>
          </select>
          <button type="button" id="addProgramBtn-0" class="px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
            Add
          </button>
        </div>
        <div id="selectedProgramsContainer-0" class="mt-2 space-y-1">
          <div class="flex items-center justify-between bg-blue-100 rounded px-3 py-1 text-sm text-blue-800">
            Bsc in Computer Science
            <button type="button" class="ml-2 text-blue-600 hover:text-blue-800 focus:outline-none">
              &times;
            </button>
          </div>
		  <div id="selectedProgramsContainer-0" class="mt-2 space-y-1">
          <div class="flex items-center justify-between bg-blue-100 rounded px-3 py-1 text-sm text-blue-800">
            BSc in Business Administration
            <button type="button" class="ml-2 text-blue-600 hover:text-blue-800 focus:outline-none">
              &times;
            </button>
          </div>
        </div>
       </div>
       <div>
         <label class="block text-sm font-medium mb-1" for="yearOfEntry-0">
          Year of Entry<span class="text-red-600 ml-1">*</span>
         </label>
        <select class="year-of-entry-select w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="yearOfEntry-0" name="yearOfEntry[]" required="">
         <option disabled="" value="">
          Select Year of Entry
         </option>
         <option value="Year 1" selected>
          Year 1
         </option>
         <option value="Year 2">
          Year 2
         </option>
         <option value="Final Year">
          Final Year
         </option>
        </select>
       </div>
       <div>
        <label class="block text-sm font-medium mb-1">
         English Language Preparation Required?
        </label>
        <div class="space-y-2">
         <label class="flex items-center">
          <input class="english-prep-radio text-blue-600 focus:ring-blue-500 h-4 w-4" name="englishPrep-0" required="" type="radio" value="yes" checked/>
          <span class="ml-2 text-sm">
           Yes
          </span>
         </label>
         <label class="flex items-center">
          <input class="english-prep-radio text-blue-600 focus:ring-blue-500 h-4 w-4" name="englishPrep-0" type="radio" value="no"/>
          <span class="ml-2 text-sm">
           No
          </span>
         </label>
        </div>
       </div>
      </div>
     </section>
    </div>
 

        <!-- Student Details Section -->
        <section aria-labelledby="studentDetailsHeading" class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-lg font-semibold mb-6" id="studentDetailsHeading">Student Details</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium mb-1" for="title">Title<span class="text-red-600 ml-1">*</span></label>
              <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="title" name="title" required>
                <option disabled value="">Select title</option>
                <option value="mr" selected>Mr</option>
                <option value="mrs">Mrs</option>
                <option value="miss">Miss</option>
                <option value="ms">Ms</option>
                <option value="dr">Dr</option>
                <option value="prof">Prof</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="forenames">Forenames<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="forenames" name="forenames" required type="text" value="John Michael"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="surname">Surname/Family Name<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="surname" name="surname" required type="text" value="Doe"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="otherNames">Other Names</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="otherNames" name="otherNames" type="text" value="Alexander"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="passportNo">Passport No<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="passportNo" name="passportNo" required type="text" value="X1234567"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="gender">Gender<span class="text-red-600 ml-1">*</span></label>
              <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="gender" name="gender" required>
                <option disabled value="">Select gender</option>
                <option value="male" selected>Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="dob">Date of Birth<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="dob" name="dob" required type="date" value="1998-05-15"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="addressLine1">Address Line 1<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="addressLine1" name="addressLine1" required type="text" value="123 Main Street"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="addressLine2">Address Line 2</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="addressLine2" name="addressLine2" type="text" value="Apt 4B"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="addressLine3">Address Line 3</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="addressLine3" name="addressLine3" type="text" value="Downtown"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="stateProvinceCounty">State/Province/County<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="stateProvinceCounty" name="stateProvinceCounty" type="text" value="California"/>
            </div>
			 <div>
              <label class="block text-sm font-medium mb-1" for="stateProvinceCounty">Domicile/Country of Permanent Residence<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="DomicileCountryofPermanentResidence" name="DomicileCountryofPermanentResidence" type="text" value="USA"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="country">Country<span class="text-red-600 ml-1">*</span></label>
              <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="country" name="country" required>
                <option disabled value="">Select country</option>
                <option value="United States of America" selected>United States of America</option>
                <option value="United Kingdom">United Kingdom</option>
                <option value="Canada">Canada</option>
                <option value="Australia">Australia</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="nationality">Nationality<span class="text-red-600 ml-1">*</span></label>
              <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="nationality" name="nationality" required>
                <option disabled value="">Select nationality</option>
                <option value="American" selected>American</option>
                <option value="British">British</option>
                <option value="Canadian">Canadian</option>
                <option value="Australian">Australian</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="placeOfBirth">Place of Birth<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="placeOfBirth" name="placeOfBirth" type="text" value="Los Angeles"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="countryOfBirth">Country of Birth<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="countryOfBirth" name="countryOfBirth" type="text" value="United States of America"/>
            </div>
			<div>
              <label class="block text-sm font-medium mb-1" for="countryOfBirth">Ethnicity<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="Ethnicity" name="Ethnicity" type="text" value="Asian"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="ucasNo">UCAS No.</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="ucasNo" name="ucasNo" type="text" value="UCAS123456"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="residentialCategory">Residential Category<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="residentialCategory" name="residentialCategory"  type="text" value="Mobile Home"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="medicalCode">Medical Code</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="medicalCode" name="medicalCode"   type="text" value=" CPDH12"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="disabilityType">Disability Type<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="disabilityType" name="disabilityType"   type="text" value="N/A"/>
                
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Has the applicant studied in this country before?<span class="text-red-600 ml-1">*</span></label>
              <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="studiedUKBefore" name="studiedUKBefore">
                <option disabled value="">Select option</option>
                <option value="yes" selected>Yes</option>
                <option value="no">No</option>
              </select>
            </div>
			
			<div>
		<label class="block text-sm font-medium mb-1" for="previousVisaRefusal">
        Has the student had a previous Visa refusal for this country?
		</label>
		<select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="previousVisaRefusal" name="previousVisaRefusal">
        <option disabled="" selected="" value="">
         Select option
        </option>
        <option value="yes">Yes</option>
        <option value="no"selected>No</option>
       </select>
       <div class="mt-2 hidden" id="previousVisaRefusalDetailsContainer">
        <label class="block text-sm font-medium mb-1" for="previousVisaRefusalDetails">
         Reason for visa refusal
        </label>
        <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="previousVisaRefusalDetails" name="previousVisaRefusalDetails" type="text"/>
       </div>
	   <div>
              <label class="block text-sm font-medium mb-1" for="studentEmail">Agent Email<span class="text-red-600 ml-1">*</span></label>
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="AgentEmail" name="AgentEmail" placeholder="Enter email" required type="email" value="john.doe@example.com"/>
                <i class="fas fa-envelope absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
           
      </div>
            <div class="mt-6">
              <label class="block text-sm font-medium mb-1" for="counsellorName">Counsellor's Name</label>
              <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="counsellorName" name="counsellorName" readonly type="text" value="Mr. Hoque"/>
            </div>
          </div>
        </section>

        <!-- Contact Details Section -->
        <section aria-labelledby="contactDetailsHeading" class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-lg font-semibold mb-6" id="contactDetailsHeading">Contact Details</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium mb-1" for="studentEmail">Student Email<span class="text-red-600 ml-1">*</span></label>
              <div class="relative">
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="studentEmail" name="studentEmail" placeholder="Enter email" required type="email" value="john.doe@example.com"/>
                <i class="fas fa-envelope absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="confirmEmail">Confirm Email<span class="text-red-600 ml-1">*</span></label>
              <div class="relative">
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="confirmEmail" name="confirmEmail" placeholder="Re-enter email" required type="email" value="john.doe@example.com"/>
                <i class="fas fa-envelope absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="primaryPhone">Phone No.</label>
              <div class="relative">
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="primaryPhone" name="primaryPhone" placeholder="Enter phone number" required type="tel" value="+1 555-123-4567"/>
                <i class="fas fa-phone absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="secondaryPhone">Mobile No.<span class="text-red-600 ml-1">*</span></label>
              <div class="relative">
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="secondaryPhone" name="secondaryPhone" placeholder="Enter mobile number" type="tel" value="+1 555-987-6543"/>
                <i class="fas fa-phone absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
              </div>
            </div>
          </div>
        </section>

        <!-- Parent/Emergency Contact Section -->
        <section aria-labelledby="parentContactHeading" class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-lg font-semibold mb-6" id="parentContactHeading">Parent/Emergency Contact</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium mb-1" for="relation">Relation to Student<span class="text-red-600 ml-1">*</span></label>
              <div class="relative">
                <input class="w-full rounded-lg bg-gray-50 border border-transparent pr-9 pl-3 text-gray-900 text-sm py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="relation" name="relation" placeholder="Father/Mother/Other" required type="text" value="Father"/>
                <i class="fas fa-user-friends absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"></i>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="parentFullName">Full Name<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-gray-50 border border-transparent text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="parentFullName" name="parentFullName" placeholder="Enter full name" required type="text" value="Robert Doe"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="parentPhone">Primary Telephone<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-gray-50 border border-transparent text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="parentPhone" name="parentPhone" placeholder="Enter phone" required type="tel" value="+1 555-222-3333"/>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" for="parentAddress">Address<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-gray-50 border border-transparent text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="parentAddress" name="parentAddress" placeholder="Same as student or enter address" type="text" value="123 Main Street, Apt 4B, Downtown"/>
            </div>
            <div class="md:col-span-2">
              <label class="block text-sm font-medium mb-1" for="altEmail">Alternative/Emergency Email<span class="text-red-600 ml-1">*</span></label>
              <input class="w-full rounded-lg bg-gray-50 border border-transparent text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="altEmail" name="altEmail" placeholder="Enter email" type="email" value="robert.doe@example.com"/>
            </div>
          </div>
        </section>

        <!-- Education & Language Section -->
        <section aria-labelledby="educationLanguageHeading" class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-lg font-semibold mb-6" id="educationLanguageHeading">Education &amp; Language</h2>
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-2">Does the student hold any language qualification?<span class="text-red-600 ml-1">*</span></label>
              <div class="space-y-2">
                <label class="flex items-center">
                  <input class="text-blue-600 focus:ring-blue-500 h-4 w-4" name="hasLanguageQual" type="radio" value="yes" checked/>
                  <span class="ml-2 text-sm">Yes</span>
                </label>
                <label class="flex items-center">
                  <input class="text-blue-600 focus:ring-blue-500 h-4 w-4" name="hasLanguageQual" type="radio" value="no"/>
                  <span class="ml-2 text-sm">No</span>
                </label>
              </div>
            </div>
            <div id="ieltsScores">
              <h3 class="text-sm font-medium mb-4">IELTS Scores</h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                <div>
                  <label class="block text-sm mb-1" for="listening">Listening</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="listening" max="9" min="0" name="listening" step="0.5" type="number" value="7.5"/>
                </div>
                <div>
                  <label class="block text-sm mb-1" for="reading">Reading</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="reading" max="9" min="0" name="reading" step="0.5" type="number" value="8.0"/>
                </div>
                <div>
                  <label class="block text-sm mb-1" for="speaking">Speaking</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="speaking" max="9" min="0" name="speaking" step="0.5" type="number" value="7.0"/>
                </div>
                <div>
                  <label class="block text-sm mb-1" for="writing">Writing</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="writing" max="9" min="0" name="writing" step="0.5" type="number" value="7.5"/>
                </div>
                <div>
                  <label class="block text-sm mb-1" for="overall">Overall</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="overall" max="9" min="0" name="overall" step="0.5" type="number" value="7.5"/>
                </div>
				<div>
                    <label class="block text-sm font-medium mb-1" for="dateFrom-0">Test Date</label>
                    <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="TestDate" name="TestDate" required type="date" value="2016-09-01"/>
                  </div>
				<div>
                  <label class="block text-sm mb-1" for="TRFNumber">TRF Number</label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="TRFNumber" name="TRFNumber" type="text" value="15BD001245MAH001"/>
                </div>
              </div>
              <div class="mt-4">
                <label class="block text-sm mb-1" for="cefrLevel">CEFR Level</label>
                <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="cefrLevel" name="cefrLevel">
                  <option disabled value="">Select CEFR level</option>
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="B1">B1</option>
                  <option value="B2" selected>B2</option>
                  <option value="C1">C1</option>
                  <option value="C2">C2</option>
                </select>
              </div>
            </div>
          </div>
        </section>

        <!-- Education History Section -->
        <section aria-labelledby="educationHistoryHeading" class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-lg font-semibold mb-6" id="educationHistoryHeading">Education History</h2>
          <div class="space-y-6" id="educationHistory">
            <div class="education-entry border border-gray-300 rounded-lg p-4 relative">
              <button aria-label="Remove this education entry" class="absolute top-2 right-2 text-red-600 hover:text-red-800 text-sm font-medium remove-education-entry hidden" type="button">
                <i class="fas fa-times"></i>
              </button>
              <h3 class="text-md font-semibold mb-4 education-entry-title">Educational Entry 1</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium mb-1" for="institutionName-0">Institution Name<span class="text-red-600 ml-1">*</span></label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="institutionName-0" name="institutionName[]" required type="text" value="Example University"/>
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1" for="institutionCountry-0">Institution Country<span class="text-red-600 ml-1">*</span></label>
                  <select class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="institutionCountry-0" name="institutionCountry[]" required>
                    <option disabled value="">Select country</option>
                    <option value="United States of America" selected>United States of America</option>
                    <option value="United Kingdom">United Kingdom</option>
                    <option value="Canada">Canada</option>
                    <option value="Australia">Australia</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1" for="courseStudied-0">Course Studied<span class="text-red-600 ml-1">*</span></label>
                  <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="courseStudied-0" name="courseStudied[]" required type="text" value="Computer Science"/>
                </div>
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium mb-1" for="dateFrom-0">Date From</label>
                    <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="dateFrom-0" name="dateFrom[]" required type="date" value="2016-09-01"/>
                  </div>
                  <div>
                    <label class="block text-sm font-medium mb-1" for="dateTo-0">Date To</label>
                    <input class="w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="dateTo-0" name="dateTo[]" required type="date" value="2020-06-30"/>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex justify-between items-center mt-4">
            <button class="flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700 rounded-lg border border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100 transition-colors" id="addMoreEducation" type="button">
              <i class="fas fa-plus"></i>
              <span>Add More Education Info</span>
            </button>
            <button class="flex items-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 rounded-lg border border-red-200 hover:border-red-300 bg-red-50 hover:bg-red-100 transition-colors hidden" id="removeLastEducation" type="button">
              <i class="fas fa-minus"></i>
              <span>Remove Last Education Entry</span>
            </button>
          </div>
          <div class="mt-6">
            <label class="block text-lg font-semibold mb-4">Required Documents</label>
            <div id="documentsContainer" class="space-y-4">
              <div class="document-upload-section bg-gray-50 border border-gray-200 rounded-lg p-4 relative">
                <button aria-label="Remove this document upload section" class="absolute top-2 right-2 text-red-600 hover:text-red-800 text-sm font-medium remove-document-section hidden" type="button">
                  <i class="fas fa-times"></i>
                </button>
                <div class="mb-3">
                  <label class="block text-sm font-medium mb-2">Select Document Type*</label>
                  <select class="document-type w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option disabled value="">Choose document type</option>
                    <option value="passport" selected>Passport</option>
                    <option value="ielts">IELTS Certificate</option>
                    <option value="educational">Educational Certificate</option>
                    <option value="transcript">Academic Transcript</option>
                    <option value="cv">CV/Resume</option>
                    <option value="other">Other Document</option>
                  </select>
                  <input class="mt-2 w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 hidden other-document-name" placeholder="Enter document name" type="text" />
                </div>
                <div class="upload-zone border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors relative">
                  <input accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="hidden document-input" required type="file"/>
                  <div class="flex flex-col items-center gap-2">
                    <i class="fas fa-cloud-upload-alt text-3xl text-blue-500"></i>
                    <p class="text-gray-600">Drop your file here, or <span class="text-blue-500">browse</span></p>
                    <p class="text-xs text-gray-400">Maximum file size: 10MB</p>
                  </div>
                  <div class="file-preview mt-3 flex flex-col items-center">
                    <p class="file-name text-sm text-blue-600 font-medium mb-2">passport_scan.pdf</p>
                    <button aria-label="Remove uploaded file" class="remove-file text-red-600 hover:text-red-800" type="button" title="Remove file">
                      <i class="fas fa-trash-alt text-lg"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div class="document-upload-section bg-gray-50 border border-gray-200 rounded-lg p-4 relative">
                <button aria-label="Remove this document upload section" class="absolute top-2 right-2 text-red-600 hover:text-red-800 text-sm font-medium remove-document-section" type="button">
                  <i class="fas fa-times"></i>
                </button>
                <div class="mb-3">
                  <label class="block text-sm font-medium mb-2">Select Document Type*</label>
                  <select class="document-type w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option disabled value="">Choose document type</option>
                    <option value="passport">Passport</option>
                    <option value="ielts" selected>IELTS Certificate</option>
                    <option value="educational">Educational Certificate</option>
                    <option value="transcript">Academic Transcript</option>
                    <option value="cv">CV/Resume</option>
                    <option value="other">Other Document</option>
                  </select>
                  <input class="mt-2 w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 hidden other-document-name" placeholder="Enter document name" type="text" />
                </div>
                <div class="upload-zone border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors relative">
                  <input accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="hidden document-input" required type="file"/>
                  <div class="flex flex-col items-center gap-2">
                    <i class="fas fa-cloud-upload-alt text-3xl text-blue-500"></i>
                    <p class="text-gray-600">Drop your file here, or <span class="text-blue-500">browse</span></p>
                    <p class="text-xs text-gray-400">Maximum file size: 10MB</p>
                  </div>
                  <div class="file-preview mt-3 flex flex-col items-center">
                    <p class="file-name text-sm text-blue-600 font-medium mb-2">ielts_certificate.pdf</p>
                    <button aria-label="Remove uploaded file" class="remove-file text-red-600 hover:text-red-800" type="button" title="Remove file">
                      <i class="fas fa-trash-alt text-lg"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex justify-end mt-4">
              <button class="flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700 rounded-lg border border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100 transition-colors" id="addMoreDocuments" type="button">
                <i class="fas fa-plus"></i>
                <span>Add More Document</span>
              </button>
            </div>
          </div>
        </section>

        <!-- Action Buttons -->
        <div class="flex justify-end space-x-4">
          <button class="px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" type="button">
            Save as Draft
          </button>
          <button class="px-6 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" type="submit">
            Update Application
          </button>
        </div>
      </form>
    </main>
  </div>

  <script>
    // The same JavaScript from the original page to handle dynamic behaviors
    // Toggle NAV active highlight on click (both desktop and mobile)
    function setActiveMenu(link, allLinks) {
      allLinks.forEach((el) => {
        el.classList.remove("active-menu");
        el.classList.remove("active-bg");
      });
      link.classList.add("active-menu");
      link.classList.add("active-bg");
    }

    document.addEventListener("DOMContentLoaded", function () {
      // Desktop nav
      const menuLinks = document.querySelectorAll(".nav-menu-link");
      menuLinks.forEach((link) => {
        link.addEventListener("click", function (e) {
          setActiveMenu(this, menuLinks);
        });
      });

      // Mobile menu controls
      const mobileMenu = document.getElementById("mobileMenu");
      const mobileMenuOverlay = document.getElementById("mobileMenuOverlay");
      const mobileMenuButton = document.getElementById("mobileMenuButton");
      const closeMobileMenu = document.getElementById("closeMobileMenu");

      function openMobileMenu() {
        mobileMenuOverlay.classList.remove("hidden");
        mobileMenu.classList.remove("translate-x-full");
        document.body.style.overflow = "hidden";
      }

      function closeMenu() {
        mobileMenuOverlay.classList.add("hidden");
        mobileMenu.classList.add("translate-x-full");
        document.body.style.overflow = "";
      }

      if(mobileMenuButton) mobileMenuButton.addEventListener("click", openMobileMenu);
      if(closeMobileMenu) closeMobileMenu.addEventListener("click", closeMenu);
      if(mobileMenuOverlay) mobileMenuOverlay.addEventListener("click", closeMenu);

      // Mobile nav active - sync with desktop nav
      const currentPath = window.location.pathname;
      [
        { id: "dashboard-link-m", href: "AgentDashboard.html" },
        { id: "applications-link-m", href: "ApplicationDash.html" },
      ].forEach((item) => {
        const link = document.getElementById(item.id);
        if (link) {
          if (item.href === currentPath) {
            link.classList.add("active-menu", "active-bg");
          }
          link.addEventListener("click", function () {
            const mobileLinks = Array.from(
              link.parentNode.querySelectorAll(".nav-menu-link")
            );
            setActiveMenu(link, mobileLinks);
            const desktopLink = document.getElementById(
              item.id.replace("-m", "")
            );
            if (desktopLink) {
              const desktopLinks = Array.from(
                desktopLink.parentNode.parentNode.querySelectorAll(
                  ".nav-menu-link"
                )
              );
              setActiveMenu(desktopLink, desktopLinks);
            }
          });
        }
      });
    });

    // Show/Hide IELTS scores section based on language qualification selection
    document.querySelectorAll('input[name="hasLanguageQual"]').forEach((radio) => {
      radio.addEventListener("change", function () {
        const ieltsScores = document.getElementById("ieltsScores");
        if (this.value === "yes") {
          ieltsScores.classList.remove("hidden");
        } else {
          ieltsScores.classList.add("hidden");
        }
      });
    });

    // Add more education entries
    const educationHistory = document.getElementById("educationHistory");
    const addMoreEducationBtn = document.getElementById("addMoreEducation");
    const removeLastEducationBtn = document.getElementById("removeLastEducation");

    function updateEducationEntryTitles() {
      const entries = educationHistory.querySelectorAll(".education-entry");
      entries.forEach((entry, idx) => {
        const title = entry.querySelector(".education-entry-title");
        if (title) {
          title.textContent = `Educational Entry ${idx + 1}`;
        }
        const removeBtn = entry.querySelector(".remove-education-entry");
        if (removeBtn) {
          if (entries.length === 1) {
            removeBtn.classList.add("hidden");
          } else {
            removeBtn.classList.remove("hidden");
          }
        }
        entry.querySelectorAll("input, select").forEach((el) => {
          if (el.id) {
            const baseId = el.id.replace(/-\d+$/, "");
            el.id = `${baseId}-${idx}`;
          }
          if (el.name) {
            if (el.name.endsWith("[]")) {
            } else {
              el.name = el.name.replace(/\[\]$/, "") + "[]";
            }
          }
        });
      });
      if (entries.length > 1) {
        removeLastEducationBtn.classList.remove("hidden");
      } else {
        removeLastEducationBtn.classList.add("hidden");
      }
    }

    addMoreEducationBtn.addEventListener("click", () => {
      const firstEntry = educationHistory.querySelector(".education-entry");
      const newEntry = firstEntry.cloneNode(true);
      newEntry.querySelectorAll("input").forEach((input) => (input.value = ""));
      newEntry.querySelectorAll("select").forEach((select) => (select.selectedIndex = 0));
      educationHistory.appendChild(newEntry);
      updateEducationEntryTitles();
    });

    removeLastEducationBtn.addEventListener("click", () => {
      const entries = educationHistory.querySelectorAll(".education-entry");
      if (entries.length > 1) {
        entries[entries.length - 1].remove();
        updateEducationEntryTitles();
      }
    });

    educationHistory.addEventListener("click", (e) => {
      if (e.target.closest(".remove-education-entry")) {
        const entry = e.target.closest(".education-entry");
        if (entry) {
          entry.remove();
          updateEducationEntryTitles();
        }
      }
    });

    // Populate institutionCountry selects initially and on new education entry
    (function populateInstitutionCountries() {
      const countries = [
        "Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czechia","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"
      ];
      function populateSelect(select) {
        select.innerHTML = '<option value="" selected disabled>Select country</option>';
        countries.forEach((country) => {
          const opt = document.createElement("option");
          opt.value = country;
          opt.textContent = country;
          select.appendChild(opt);
        });
      }
      document.querySelectorAll("select[name='institutionCountry[]']").forEach(populateSelect);
      const observer = new MutationObserver(() => {
        document.querySelectorAll("select[name='institutionCountry[]']").forEach(populateSelect);
      });
      observer.observe(educationHistory, { childList: true });
    })();

    // Documents section logic
    const documentsContainer = document.getElementById("documentsContainer");
    const addMoreDocumentsBtn = document.getElementById("addMoreDocuments");

    function createDocumentSection() {
      const div = document.createElement("div");
      div.className = "document-upload-section bg-gray-50 border border-gray-200 rounded-lg p-4 relative";

      div.innerHTML = `
        <button type="button" aria-label="Remove this document upload section" class="absolute top-2 right-2 text-red-600 hover:text-red-800 text-sm font-medium remove-document-section">
          <i class="fas fa-times"></i>
        </button>
        <div class="mb-3">
          <label class="block text-sm font-medium mb-2">Select Document Type*</label>
          <select class="document-type w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
            <option value="" selected disabled>Choose document type</option>
            <option value="passport">Passport</option>
            <option value="ielts">IELTS Certificate</option>
            <option value="educational">Educational Certificate</option>
            <option value="transcript">Academic Transcript</option>
            <option value="cv">CV/Resume</option>
            <option value="other">Other Document</option>
          </select>
          <input type="text" placeholder="Enter document name" class="mt-2 w-full rounded-lg bg-white border border-gray-200 text-gray-900 text-sm px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 hidden other-document-name" />
        </div>
        <div class="upload-zone border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors relative">
          <input type="file" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="hidden document-input" required />
          <div class="flex flex-col items-center gap-2">
            <i class="fas fa-cloud-upload-alt text-3xl text-blue-500"></i>
            <p class="text-gray-600">Drop your file here, or <span class="text-blue-500">browse</span></p>
            <p class="text-xs text-gray-400">Maximum file size: 10MB</p>
          </div>
          <div class="file-preview mt-3 hidden flex flex-col items-center">
            <p class="file-name text-sm text-blue-600 font-medium mb-2"></p>
            <button type="button" aria-label="Remove uploaded file" class="remove-file text-red-600 hover:text-red-800" title="Remove file">
              <i class="fas fa-trash-alt text-lg"></i>
            </button>
          </div>
        </div>
      `;
      return div;
    }

    addMoreDocumentsBtn.addEventListener("click", () => {
      const newDocSection = createDocumentSection();
      documentsContainer.appendChild(newDocSection);
    });

    documentsContainer.addEventListener("change", (e) => {
      if (e.target.classList.contains("document-type")) {
        const select = e.target;
        const otherNameInput = select.parentElement.querySelector(".other-document-name");
        if (select.value === "other") {
          otherNameInput.classList.remove("hidden");
          otherNameInput.required = true;
        } else {
          otherNameInput.classList.add("hidden");
          otherNameInput.required = false;
          otherNameInput.value = "";
        }
      }
      if (e.target.classList.contains("document-input")) {
        const input = e.target;
        const filePreview = input.parentElement.querySelector(".file-preview");
        const fileNameElem = filePreview.querySelector(".file-name");
        if (input.files.length > 0) {
          fileNameElem.textContent = input.files[0].name;
          filePreview.classList.remove("hidden");
        } else {
          filePreview.classList.add("hidden");
          fileNameElem.textContent = "";
        }
      }
    });

    documentsContainer.addEventListener("click", (e) => {
      if (e.target.closest(".remove-file")) {
        const btn = e.target.closest(".remove-file");
        const filePreview = btn.closest(".file-preview");
        const uploadZone = filePreview.parentElement;
        const input = uploadZone.querySelector(".document-input");
        input.value = "";
        filePreview.classList.add("hidden");
        filePreview.querySelector(".file-name").textContent = "";
      }
      if (e.target.closest(".upload-zone")) {
        const uploadZone = e.target.closest(".upload-zone");
        const input = uploadZone.querySelector(".document-input");
        input.click();
      }
      if (e.target.closest(".remove-document-section")) {
        const section = e.target.closest(".document-upload-section");
        if (section) {
          section.remove();
        }
      }
    });

    // Update course start date when program is selected (for all university applications)
    function updateStartDate(select) {
      const startDateInput = select
        .closest(".university-application")
        .querySelector(".start-date-input");
      if (startDateInput) {
        startDateInput.value = "September 2024";
      }
    }

    document.addEventListener("change", function (e) {
      if (e.target.classList.contains("program-select")) {
        updateStartDate(e.target);
      }
    });
	
	// Show/Hide previous visa refusal details based on selection
      const previousVisaRefusalSelect = document.getElementById("previousVisaRefusal");
      const previousVisaRefusalDetailsContainer = document.getElementById("previousVisaRefusalDetailsContainer");
      if (previousVisaRefusalSelect && previousVisaRefusalDetailsContainer) {
        previousVisaRefusalSelect.addEventListener("change", function () {
          if (this.value === "yes") {
            previousVisaRefusalDetailsContainer.classList.remove("hidden");
          } else {
            previousVisaRefusalDetailsContainer.classList.add("hidden");
          }
        });
      }

    // Add multiple university applications
    const addUniversityBtn = document.getElementById("addUniversityApplication");
    const universityApplicationsContainer = document.getElementById("universityApplicationsContainer");

    addUniversityBtn.addEventListener("click", () => {
      const currentCount = universityApplicationsContainer.querySelectorAll(".university-application").length;
      const newIndex = currentCount;

      const firstApplication = universityApplicationsContainer.querySelector(".university-application");
      const newApplication = firstApplication.cloneNode(true);

      const heading = newApplication.querySelector("h2");
      heading.textContent = `University Application ${newIndex + 1}`;

      const removeBtn = newApplication.querySelector(".remove-university-application");
      removeBtn.classList.remove("hidden");

      newApplication.querySelectorAll("input, select").forEach((el) => {
        if (el.type === "radio" || el.type === "checkbox") {
          el.checked = false;
        } else {
          el.value = "";
        }
        if (el.id) {
          const baseId = el.id.replace(/-\d+$/, "");
          el.id = `${baseId}-${newIndex}`;
        }
        if (el.name) {
          if (el.type === "radio") {
            const baseName = el.name.replace(/-\d+$/, "");
            el.name = `${baseName}-${newIndex}`;
          } else if (el.name.endsWith("[]")) {
          } else {
            const baseName = el.name.replace(/\[\]$/, "");
            el.name = `${baseName}[]`;
          }
        }
      });

      universityApplicationsContainer.appendChild(newApplication);
    });

    universityApplicationsContainer.addEventListener("click", (e) => {
      if (e.target.closest(".remove-university-application")) {
        const applicationSection = e.target.closest(".university-application");
        if (applicationSection) {
          applicationSection.remove();

          const applications = universityApplicationsContainer.querySelectorAll(".university-application");
          applications.forEach((app, idx) => {
            const heading = app.querySelector("h2");
            heading.textContent = `University Application ${idx + 1}`;
            const removeBtn = app.querySelector(".remove-university-application");
            if (applications.length === 1) {
              removeBtn.classList.add("hidden");
            } else {
              removeBtn.classList.remove("hidden");
            }
          });
        }
      }
    });
	

    // Initial setup for education entries and documents
    document.addEventListener("DOMContentLoaded", () => {
      updateEducationEntryTitles();
    });
  </script>
</body>
</html>
